\documentclass[spanish,a4paper,11pt]{article}

\usepackage{latexsym,amsfonts,amssymb,amstext,amsthm,float,amsmath}

\usepackage[spanish]{babel}    
\usepackage{html}
\usepackage{ucs}
\usepackage[utf8x]{inputenc}
\usepackage{graphicx}
\usepackage{color}

\usepackage{listings}
\lstset{language=Ruby}
\lstset{
escapeinside={\#(*}{*)}
}

%\usepackage{fancyhdr}
\usepackage{lastpage}

\usepackage[dvips]{epsfig}  
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%123456789012345678901234567890123456789012345678901234567890123456789
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Format
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\topmargin -5 mm
\headheight 2 mm
%\headsep 0 mm
\textheight 255 mm
\oddsidemargin -5.8 mm
\evensidemargin -5.8 mm
\textwidth 16 cm
\columnsep 0 mm
%\pagestyle{plain}
\pagestyle{myheadings}
\markright{}

%\pagenumbering{arabic}
%\cfoot{\thepage\ of \pageref{LastPage}}

\input{amssym.def}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%     
%
% En la cabecera hay que cambiar al FECHA de la convocatoria
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%     


\input{booktt/commontex/commands.tex}





\begin{document}
\thispagestyle{empty}
\begin{tabular}{lcc}
%%%%
  \begin{tabular}{c}
%   \epsfig{file=/tmp/ullesc.eps,width=1.5cm}  
  \end{tabular}                      &
%%%%
  \begin{tabular}{c}
   {\bf Universidad de La Laguna.  Escuela Técnica Superior de Ingeniería Informática}     \\
   {\bf Tercero del Grado de Informática}\\
   {\bf DESARROLLO DE SISTEMAS INFORMÁTICOS 2ª PARTE}\\
     \pageref*{LastPage} páginas         \\   
  \end{tabular}                      &
%%%%
%%%%
\end{tabular}

\bigskip

\hrulefill
% \underline{\hspace{11.5cm}} Fecha \underline{\hspace{2cm}} 
%\bigskip
%
%\begin{footnotesize}
%%Notas:
%\begin{itemize}
%  \item
%%  La duración del examen completo es de 2 horas.
%   Respete el uso de mayúsuclas y minúsculas en los comandos y programas
%  \item Escriba con letra clara. Use también el reverso de las hojas 
%  \item Los ejercicios deben realizarse con bolígrafo.
%  \item Al finalizar el exámen, ENTREGAR TODOS LOS FOLIOS utilizados, incluyendo éste.
%  \item Las calificaciones del exámen estarán disponibles unos días antes de la fecha límite de entrega de las actas.
%  \item Si esta es su 5ª ó 6ª convocatoria, escriba “Xª CONVOCATORIA” en el encabezado de esta hoja.
%\end{itemize}
%\end{footnotesize}
%
%

%\tableofcontents

\section{jQuery}
\begin{enumerate}
\item 
jQuery uses CSS selectors to select elements? True or false?
\item 
Which sign does jQuery use as a shortcut for jQuery?
\item 
With jQuery, look at the following selector: \verb|$("div")|. What does it select?
\item 
The jQuery \verb|html()| method works for both HTML and XML documents. True or false?
\item 
What is the correct jQuery code to set the background color of all p elements to red?
\item 
With jQuery, look at the following selector: \verb|$("div.intro")|. What does it select?
\item 
Which jQuery method is used to hide selected elements?
\item 
Which jQuery method is used to set one or more style properties for selected elements?
\item 
Which jQuery method is used to perform an asynchronous HTTP request?
\item 
What is the correct jQuery code for making all div elements 100 pixels high?
\item 
Which jQuery function is used to prevent code from running, before the document is finished loading?
\item 
Which jQuery method should be used to deal with name conflicts?
% https://api.jquery.com/jquery.noconflict/
\item 
Which jQuery method is used to switch between adding/removing one or more classes (for CSS) from selected elements?
% http://www.w3schools.com/jquery/html_toggleclass.asp
\item 
Look at the following jQuery selector: \verb|$("div#intro .head")|. What does it select?
% All elements with class="head" inside the div element with id="intro"
\item 
Is jQuery a W3C standard?
\end{enumerate}



\section{Underscore}
\begin{enumerate}
\item  ¿Que argumentos espera el método \verb|template| de Underscore?
¿Cual es la función de cada uno de ellos?
% _.template(templateString, [data], [settings])
\item 
¿Que diferencia hay entre \verb|<% ... %>|, \verb|<%= ... %>| y \verb|<%- ... %>|?
\item El atributo \verb|templateSettings| de Underscore puede ser usado para configurar los
templates. Rellene las expresiones regulares que faltan para que se usen delimitadores
con llaves como \verb|{{ ... }}| para evaluar, \verb|{{= ... }}| para interpolar y  
\verb|{{- ... }}| para interpolar y escapar el HTML:
\begin{verbatim}
_.templateSettings = {
       interpolate: /____________________/gim,
       evaluate:    /____________________/gim
       escape:      /____________________/gim
 }
\end{verbatim}
\item  Queremos mostrar una lista de \verb|items| en una tabla con dos columnas.
En la primera columna va el número de orden y en la segunda el nombre del 
item. El template Underscore se carga desde el elemento \verb|#usageList|
del DOM y el resultado del template se vuelca en el elemento 
\verb|#target| como sigue:
\begin{verbatim}
var items = [ {name:"Alejandro"}, {name:"......."}, {name:"Zacarias"} ];
var template = usageList.innerHTML;
target.innerHTML = _.template(template,{items:items});
\end{verbatim}
Complete el identificador del \verb|<script>|,
el identificador del \verb|<div>| usado para la salida y 
la parte que falta entre las etiquetas 
\verb|<tbody>|:
\begin{verbatim}
<script type="text/html" id='_________'>
    <table> 
      <thead> 
         <tr> 
            <th> Id </th> <th>Name</th> 
         </tr>
      </thead> 
      <tbody>







    </tbody > 
   </table>
</script>
<!-- Create your target -->
<div id="______"></div>
\end{verbatim}
% <script type="text/html" id='usageList'>
%     <table> 
%       <thead> 
%          <tr> 
%             <th> Id </th> <th>Name</th> 
%          </tr>
%       </thead> 
%       <tbody>
%         <% _.each(items, function(item, key, list) { %> 
%              <% var f = item.name; %> 
%               <tr> 
%                   <td> <%= key %></td>
%                    <td class="<%= f %>"><%= item.name %></td > 
%               </tr>
%         <% });%>
%     </tbody > 
%    </table>
% </script>
% <!-- Create your target -->
% <div id="target"></div>
\end{enumerate}


\section{localStorage}
\begin{enumerate}
\item 
¿Que diferencias y que similitudes hay entre los cookies y localStorage?
%
%With local storage, web applications can store data locally within the user's browser.
%
%Before HTML5, application data had to be stored in cookies, included in every server request. Local storage is more secure, and large amounts of data can be stored locally, without affecting website performance.
%
%
% 1. Cookies are primarily for reading server-side, local storage can only be read client-side. 
% 2. Cookies give you a limit of 4096 bytes per cookie. Local Storage is 5MB per domain.
%    el número de cookies permitidos varia pero puede ser de unos 180
% 3. localStorage stores data with no expiration date, and gets cleared only through JavaScript, 
%    or clearing the Browser Cache / Locally Stored Data - unlike cookie expiry.
% 4. Both They are scoped to the same origin (domain): it's shared across all pages on the same origin.  From w3.org/TR/webstorage sessionStorage is scoped to the "top-level browsing context"
\item 
¿Que diferencias hay entre localStorage y sessionStorage?
% There is no difference between them except for the intended "non-persistence" of sessionStorage.
\item 
¿En que consiste las reglas de segregación conocidas como {\it same origin policy}?
% a web browser permits scripts contained in a first web page to access data in a second web page, but only if both web pages have the same origin.
¿Como se relacionan con localStorage?
\item 
¿Como guardo en localStorage el contenido de una variable \verb|chuchu|?
% localStorage["Nombre"] = $("#nombre").val();
% JSON.stringify(value[, replacer[, space]])
¿Como leo el contenido almacenado en localStorage con clave \verb1chuchu1?
% $("#nombre2").text("Hola " + localStorage["Nombre"] + " como estas!");
% JSON.parse(text[, reviver])
\item 
¿Como borro una clave almacenada en localStorage?
%//Clears the value of MyKey
%window.localStorage.clear("MyKey");
%
%//Clears all the local storage data
% window.localStorage.clear();
% window.localStorage.removeItem("name");
\item 
\begin{enumerate}
\item 
¿Que es \htmladdnormallink{Local Storage}{http://diveinto.html5doctor.com/storage.html}? ¿Que hace la siguiente línea?
\begin{verbatim}
  if (window.localStorage) localStorage.original  = temp;
\end{verbatim}
\item  ¿Cuando se ejecutará esta callback? ¿Que hace?
\begin{verbatim}
window.onload = function() {
  // If the browser supports localStorage and we have some stored data
  if (window.localStorage && localStorage.original) {
    document.getElementById("original").value = localStorage.original;
  }
};
\end{verbatim}
\end{enumerate}
\end{enumerate}


\section{Heroku}
\begin{enumerate}
\item  Una vez instalado el Heroku toolbelt nos debemos autenticar en heroku con el cliente.
¿Cual es el comando para autenticarnos?
% heroku login
\item 
¿Cual es el comando para crear nuestra aplicación en Heroku (suponemos que ya esta bajo el control de \verb|git|? ¿Qué remoto tendremos definido después de crear nuestra aplicación en Heroku?
% heroku create predictiveparser
% heroku  https://git.heroku.com/predictiveparser.git
\item 
¿Cual es el comando para desplegar nuestra aplicación en Heroku?
% git push heroku master
\item 
Si la versión que queremos publicar en heroku no está en la rama
\verb|master| sino que está en la rama \verb|tutu| ¿Como debemos 
modificar el comando anterior?
\item 
¿Con que comando puedo abrir una ventana en el navegador que visite la aplicación desplegada?
¿Que formato tiene la URL para nuestra aplicación?
\item 
¿Con que comando puedo ver los logs de la aplicación desplegada?
\item 
¿Como se debe llamar el fichero en el que explicito que comando debe usarse para arrancar 
nuestra aplicación en Heroku?
\item 
Heroku se percata  que nuestra aplicación es una aplicación desarrollada con \verb|Node.js|
por la presencia de un cierto fichero. ¿De que fichero estamos hablando?
\item 
¿Cual es la mejor forma de ejecutar en local una aplicación express.js 
que va a ser desplegada en Heroku?
\end{enumerate}

\section{ECMA6}
\begin{enumerate}
\item Escriba  en ECMA6 un programa que 
\item  Observemos este ejemplo:
\begin{verbatim}
class Contact {
1	  constructor(name, email, button) {
2	    this.name = name;
3	    this.email = email;
4	  
5	    button.onclick = function(event) {
6	      sendEmail(this.email);
7	    }
8	  }
}
\end{verbatim}
\begin{enumerate}
\item  
%I want to use a sendEmail function when a button is pressed and I pass in the this.email it should be the email from the instance of the contact, 
¿Cuanto vale \verb|this| en la línea 6?
% but this in that context is the button. 
\item ¿Como podemos reescribir este código en ECMA6 para que \verb|this| refiera al objeto \verb|Contact|?
%  button.onclick = (event) => {
%      sendEmail(this.email);
%    }
\end{enumerate}

\item 
¿Que se entiende por Hoisting en JS? ¿Que efectos indeseables conlleva? ¿Como se soluciona en ECMA5?
\end{enumerate}

\section{Mongo y Mongoose}


\begin{enumerate}
\item 
¿Que diferencia hay entre una tabla de una base de datos relacional y una collection de MongoDB?
% Unlike a table, however, a collection does not require its documents to have the same schema.
\item 
¿Como se llama la primary key de un documento MongoDB?
% _id
\item 
Escriba el código Mongoose para conectarse a la MongoDB database \verb|chuchu|
\item 
Escriba el código Mongoose para crear un esquema para modelar una colección de \verb|usuarios|
\item 
Escriba el código Mongoose para crear un modelo a partir del esquema anterior
%var mongoose = require('mongoose');
%var Schema = mongoose.Schema;
%
%// create a schema
%var userSchema = new Schema({
%  name: String,
%  username: { type: String, required: true, unique: true },
%  password: { type: String, required: true },
%  admin: Boolean,
%  location: String,
%  meta: {
%    age: Number,
%    website: String
%  },
%  created_at: Date,
%  updated_at: Date
%});
%
%// the schema is useless so far
%// we need to create a model using it
%var User = mongoose.model('User', userSchema);
\item 
Escriba el código Mongoose para crear un documento usuario y guardarlo en la base de datos

%var chris = new User({
%  name: 'Chris',
%  username: 'sevilayha',
%  password: 'password' 
%});
%
%// call the custom method. this will just add -dude to his name
%// user will now be Chris-dude
%chris.dudify(function(err, name) {
%  if (err) throw err;
%
%  console.log('Your new name is ' + name);
%});
%
%// call the built-in save method to save to the database
%chris.save(function(err) {
%  if (err) throw err;
%
%  console.log('User saved successfully!');
%});
\item 
Escriba el código Mongoose para buscar por un documento usuario con nombre \verb|'Pepe'|
%/ get the user starlord55
%User.find({ username: 'starlord55' }, function(err, user) {
%  if (err) throw err;
%
%  // object of the user
%  console.log(user);
%});
\end{enumerate}

\section{EJS}

\begin{enumerate}
\item 
Véase 
\htmladdnormallink{Getting Started with EJS}{http://www.embeddedjs.com/getting_started.html}
\item  Mejore este template
\begin{verbatim}
<li>
    <a href='supplies/<%= supplies[i] %>'>
        <%= supplies[i] %>
    </a>
</li>
\end{verbatim}
usando un helper proveído por EJS
% <li>
%    <%= link_to(supplies[i], 'supplies/'+supplies[i]) %>
% </li>
\end{enumerate}

\section{Jade}
\begin{enumerate}
\item 
Véase 
\htmladdnormallink{http://jade-lang.com/demo/}{http://jade-lang.com/demo/}
\item Traduzca a Jade el siguiente código HTML:
\begin{verbatim}
<div id="content">
  <div class="block">
    <input id="bar" class="foo1 foo2"/>
  </div>
</div>
\end{verbatim}
% #content
%   .block
%     input#bar.foo1.foo2
\item 
¿Que hace el punto después de un elemento? como en:
\begin{verbatim}
p.
  foo bar
  hello world
\end{verbatim}
\item 
Supongamos que el objeto interpolado es:
\begin{verbatim}
{"name": "Hello <em>World</em>"}
\end{verbatim}
¿Que diferencia hay entre estas dos interpolaciones?
\begin{enumerate}
\item 
\verb|li= name| % <li>Hello &lt;em&gt;World&lt;/em&gt;</li>
\item 
\verb|li!= name| % <li>Hello <em>World</em></li>
\end{enumerate}
\item 
¿Que diferencia hay entre estas dos interpolaciones?

\begin{enumerate}
\item 
\verb|li Say #{name}| % <li>Say Hello &lt;em&gt;World&lt;/em&gt;</li>
\item 
\verb|li Say !{name}| % <li>Say Hello <em>World</em></li>
\end{enumerate}
\item 
Traduzca a Jade el siguiente fragmento HTML:
\begin{verbatim}
<input type="text" placeholder="your name"/>
\end{verbatim}
% input(type=type, value='Hello #{name}')
\end{enumerate}

\section{SASS}

\begin{enumerate}
\item 
¿Como se inicializa una constante en SASS?
% $font-stack:    Helvetica, sans-serif;
% $primary-color: #333;
% 
% body {
%   font: 100% $font-stack;
%   color: $primary-color;
% }}
\item 
Reescriba este fragmento CSS en SASS:
\begin{verbatim}
nav ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

nav li {
  display: inline-block;
}

nav a {
  display: block;
  padding: 6px 12px;
  text-decoration: none;
}
\end{verbatim}
\end{enumerate}

\section{Expresiones Regulares}
\begin{enumerate}
\item  Rellene las partes que faltan:
\begin{verbatim}
> re = /d(b+)(d)/ig
/d(b+)(d)/gi
> z = "dBdxdbbdzdbd"
'dBdxdbbdzdbd'
> result = re.exec(z)
[ ______, _____, ______, index: __, input: 'dBdxdbbdzdbd' ]
> re.lastIndex
______
> result = re.exec(z)
[ ______, _____, ______, index: __, input: 'dBdxdbbdzdbd' ]
> re.lastIndex
______
> result = re.exec(z)
[ ______, _____, ______, index: __, input: 'dBdxdbbdzdbd' ]
> re.lastIndex
______
> result = re.exec(z)
_____
\end{verbatim}
\item Escriba la expresión regular \verb|r| para que produzca el resultado final:
\begin{verbatim}
> x = "hello"
> r = /l(___)/
> z = r.exec(x)
[ 'l', index: 3, input: 'hello' ]
\end{verbatim}
\item 
Rellene el valor que falta:
\begin{verbatim}
> z = "dBdDBBD"
> re = /d(b+)(d)/ig
> re.lastIndex = ________
> result = re.exec(z)
[ 'DBBD',
  'BB',
  'D',
  index: 3,
  input: 'dBdDBBD' ]
\end{verbatim}
\item  Conteste:
\begin{enumerate}
\item Explique que hace el siguiente fragmento de código:
\begin{verbatim}
> RegExp.prototype.bexec = function(str) {
...   var i = this.lastIndex;
...   var m = this.exec(str);
...   if (m && m.index == i) return m;
...   return null;
... }
[Function]
\end{verbatim}
\item Rellene las salidas que faltan:
\begin{verbatim}
> re = /d(b+)(d)/ig
/d(b+)(d)/gi
> z = "dBdXXXXDBBD"
'dBdXXXXDBBD'
> re.lastIndex = 3
> re.bexec(z)
_____________________________________________________
> re.lastIndex = 7
> re.bexec(z)
_____________________________________________________
\end{verbatim}
\end{enumerate}
\item 
Escriba una expresión JavaScript que permita reemplazar 
todas las apariciones de palabras consecutivas repetidas 
(como \verb|hello hello|)
por una sóla aparición de la misma
%\item 
%Supongamos que se usa una función como segundo argumento de \verb|replace|.
%¿Que argumentos recibe?
\item 
¿Cual es la salida? 
\begin{verbatim}
> "bb".match(/b|bb/)

> "bb".match(/bb|b/)

\end{verbatim}

Justifique su respuesta.
\item  El siguiente fragmento de código tiene por objetivo
escapar las entidades HTML para que no sean intérpretadas como código HTML.
Rellene las partes que faltan.
\begin{verbatim}
var entityMap = {
    "&": "&___;",
    "<": "&__;",
    ">": "&__;",
    '"': '&quot;',
    "'": '&#39;',
    "/": '&#x2F;'
  };

function escapeHtml(string) {
  return String(string).replace(/_________/g, function (s) {
    return ____________;
  });
\end{verbatim}
\end{enumerate}

\section{JSON}
\begin{enumerate}
\item
¿Como se llama el método que permite obtener una representación como cadena de un objeto?
¿Que parámetros espera? ¿Como afectan dichos parámetros?
\end{enumerate}

\section{OOP}
\begin{enumerate}
\item
Escriba un código JavaScript que defina una clase \verb|Persona| con atributos \verb|nombre|
y \verb|apellidos| y que disponga de un método \verb|saluda|.
\item 
Escriba un código ECMA6 que defina una clase \verb|Persona| con atributos \verb|nombre|
y \verb|apellidos| y que disponga de un método \verb|saluda|.
% https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes
%class Polygon {
%  constructor(height, width) {
%    this.height = height;
%    this.width = width;
%  }
%  
%  get area() {
%    return this.calcArea();
%  }
%
%  calcArea() {
%    return this.height * this.width;
%  }
% static chuchu {}
%}
%
%class Square extends Polygon {
%  speak() {
%    console.log(this.name + ' barks.');
%  }
%}
%const square = new Polygon(10, 10);
%
%console.log(square.area);
%\item
%Reescriba la solución al problema anterior haciendo uso del método \verb|template|
%de  \verb|underscore| y ubicando el template dentro de un tag \verb1script1.

\end{enumerate}


\section{Code Smelling}
\begin{enumerate}
\item 
Defina el término {\it code smelling}
% a code smell is a surface indication that usually corresponds to a deeper problem in the system.
% Smells are certain structures in the code that indicate violation of fundamental design principles and negatively impact design quality.
\item 
¿Que diferencia hay entre un {\it code smell} y un {\it bug}?
%Code smells are usually not bugs. They are not technically incorrect and do not currently prevent the program from functioning. Instead, they indicate weaknesses in design that may be slowing down development or increasing the risk of bugs or failures in the future.

\item  Explique el code smell {\it Duplicated Code}
\item  Explique el Switch smell
\end{enumerate}

\section{HTML}
\begin{enumerate}
\item ¿Cual debe ser el valor del atributo \verb|rel| para usar la imagen como favicon?
\begin{verbatim}
<link rel="_____________" href="etsiiull.png" type="image/x-icon"> 
\end{verbatim}
\end{enumerate}

\section{CSS}
\begin{enumerate}
\item  ¿Que hacen las siguientes pseudo-clases estructurales CSS3?
\begin{verbatim}
tr:nth-child(odd)    { background-color:#eee; }
tr:nth-child(even)    { background-color:#00FF66; }
\end{verbatim}

\item ¿Que contiene el objeto \verb|window| en un programa JavaScript que se ejecuta en un navegador?
\item 
Enumere tres elementos HTML que sean de la categoría \verb|inline|
%b em span
\item 
Enumere tres elementos HTML que sean de la categoría \verb|block|
% p div h1 section
\item  ¿Cómo se hace para que elementos de la página web permanezcan ocultos para 
posteriormente mostrarlos? ¿Que hay que hacer en el HTML, en la hoja de estilo y en el JavaScript?
\item Rellene los estilos para los elementos de las clases para que su visibilidad
case con la que su nombre indica:
\begin{verbatim}
.hidden      { display: ____; }
.unhidden    { display: _____; }
\end{verbatim}

\end{enumerate}

\section{Mocha, Chai}

\begin{enumerate}
\item 
¿Como creamos el directorio con el esqueleto inicial para las pruebas con mocha?
% mocha init tests
\item Rellene lo que falta:
\begin{verbatim}
[~/srcPLgrado/temperature/tests(master)]$ cat tests.js 
var assert = chai.______;

suite('temperature', function() {
    test('[1,{a:2}] == [1,2]', function() {
      assert._________([1, {a:2}], [1, {a:2}]);
    });
    test('5X = error', function() {
        original.value = "5X";
        calculate();
        assert._____(converted.innerHTML, /ERROR/);
    });
});
\end{verbatim}
\item 
Este es un fichero \verb|test/index.html| apto para ejecutar las pruebas con Mocha y Chai
en la práctica de la Temperatura. Rellene las partes que faltan:
\begin{verbatim}
[~/srcPLgrado/temperature(karma)]$ cat tests/index.html 
<!DOCTYPE html>
<html>
  <head>
    <title>Mocha</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="mocha.css" />
  </head>
  <body>
    <div id="_____"></div>   <!-- para la salida de las pruebas -->
    <input id="original" placeholder="32F" size="50">
    <span class="output" id="converted"></span>

    <script src="________"></script>
    <script src="________"></script>
    <script src="../temperature.js"></script>
    <script>mocha._____('___')</script>
    <script src="tests.js"></script>

    <script>
      mocha.___();
    </script>
  </body>
</html>
\end{verbatim}
\item  Rellene las partes que faltan del fichero con las pruebas TDD
en Mocha y Chai para la práctica de la temperatura:
\begin{verbatim}
[~/srcPLgrado/temperature(karma)]$ cat tests/tests.js 
var assert = ____.assert;

_____('temperature', function() {

    ____('32F = 0C', function() {
        original.value = "32F";
        calculate();
        assert._________(converted.innerHTML, "0.0 Celsius");
    });
});
\end{verbatim}
% suite
% test
% deepEqual or equal
\item 
¿Como puedo ejecutar las pruebas escritas usando Mocha y Chai
usando el comando \verb|npm test|?. (no se asume el uso de Karma en esta pregunta)
Explique como hacerlo.
\end{enumerate}

\section{Gulp}
\begin{enumerate}
\item Complete las partes que faltan
del siguiente \verb|gulpfile.js| en el que se lleva a cabo una
 tarea para la optimización (uglify/minify)
de la aplicación de la práctica de la temperatura:
\begin{verbatim}
/tmp/pl-grado-temperature-converter(karma)]$ cat gulpfile.js 
var gulp    = require('gulp'),
    gutil   = require('gulp-util'),
    uglify  = require('gulp-uglify'),
    concat  = require('gulp-concat');
var minifyHTML = require('gulp-minify-html');
var minifyCSS  = require('gulp-minify-css');

gulp.____('minify', function () {
  gulp.___('temperature.js')
  .____(uglify())
  .___(gulp.____('minified'));

  gulp.__('./index.html')
    .___(minifyHTML())
    .___(gulp.___('./minified/'))

  gulp.__('./*.css')
   .___(minifyCSS({keepBreaks:true}))
   .___(gulp.___('./minified/'))
});
\end{verbatim}
\end{enumerate}

% AÑADIR MOCHA, CHAI

\section{npm y package.json}
\begin{enumerate}
\item 
¿Con que comando creo el fichero \verb|package.json|?
\item 
Explique en consiste el versionado semántico/semantic versioning. ¿Cual es el nombre en
inglés de los tres números de version? ¿Como cambian?
\item 
¿Que se guarda en el campo \verb|"dependencies": {}| de \verb|package.json|?
\item 
¿Que opción debo añadir al comando \verb|npm install| para que la librería instalada se añada
como dependencia en el fichero \verb|package.json|?
\item 
¿Que se guarda en el campo \verb|"devDependencies": {}| de \verb|package.json|?
\item 
¿Que opción debo añadir al comando \verb|npm install| para que la librería instalada se añada
como \verb|"devDependencies"| en el fichero \verb|package.json|?
\item 
Explique que significan en los objetos que describen las dependencias 
dentro \verb|package.json|  las siguientes notaciones:
\begin{enumerate}
\item \verb1*1
\item \verb1latest1
\end{enumerate}
\item  ¿Cual es la salida? 
¿Como actúa el operador \verb|~|?
\begin{verbatim}
> var semver = require('semver')
undefined
> semver.toComparators('~1.2.3')
[ [ '_______', '______' ] ]
\end{verbatim}
% [ '>=1.2.3', '<1.3.0' ]'
%For tilde ranges, major and minor versions must match 
%those specified, but any patch version greater than or equal 
%to the one specified is valid.
\item  ¿Cual es la salida?
¿Como actúa el operador \verb|^|?
\begin{verbatim}
> var semver = require('semver')
undefined
> semver.toComparators('^1.2.3')
[ [ '_______', '______' ] ]
\end{verbatim}
% [ [ '>=1.2.3', '<2.0.0' ] ]]
% For caret ranges, only major version must match. Any minor or
% patch version greater than or equal to the minimum is valid.
\end{enumerate}
% AÑADIR gulp
% AÑADIR BLANKET
% AÑADIR KARMA

\section{Karma}
\begin{enumerate}
\item 
Explique como funciona Karma
\item 
¿Con que comando puedo crear el fichero de configuración de Karma?
\item  ¿Que debemos poner en la entrada \verb|frameworks| de karma para el ejemplo de la temperatura?
\begin{verbatim}
    frameworks: ['_____'],
\end{verbatim}
\item La librería/plugin \verb|karma-mocha| provee el adapter de Karma para Mocha.
¿Como le pasamos opciones para configurar Mocha desde Karma?
Rellene las partes que faltan:
\begin{verbatim}
  client: {
    args: ['--grep', 'pattern'], // solo pruebas que casan con pattern
    mocha: {
      __: '___'
    }
  },
\end{verbatim}
% ui
% tdd
\item 
Explique que debe ponerse (y que no) en la sección \verb|files| del fichero de
configuración de Karma ¿Donde son cargados dichos ficheros?:
\begin{verbatim}
    files: [ ... ],
\end{verbatim}

\item 
Los preprocesadores en Karma nos permiten procesar los ficheros en \verb|files| 
antes de que sean cargados en el navegador.

\begin{verbatim}
  preprocessors = {
    '**/*.coffee': 'coffee',
    '**/*.html': 'html2js'
  };
\end{verbatim}
¿Que hace el preprocesador \verb|html2js|?
¿Que hace el preprocesador \verb|coffee|?
\item Complete la función \verb|setup| de las pruebas de la práctica de la temepratura
con Mocha, Chai y Karma:
\begin{verbatim}
   setup(function(){
      if (typeof ________ !== 'undefined') {
          document.body.innerHTML = ________['tests/test.html'];
          original = document.______________('original');
          converted = document.______________('converted');
      }
    });
\end{verbatim}
¿Como se llama la variable en la que se guardan los HTML de los ficheros cargados en los
navegadores?
\item 
¿Que es PhantomJS? ¿Como funciona?
\end{enumerate}

\section{Ajax}
\begin{enumerate}
\item 
What method of the \verb|req| object returns 
a boolean value that is \verb|true| if the request’s \verb|X-Requested-With| header field is 
\verb|XMLHttpRequest|, indicating the intent 
to retrieve data from the  URL without having to do a full page refresh?.

Fill the gap:
\begin{verbatim}
app.get('/chuchu', function (req, res) {
  var isAjaxRequest = req.______________;
  ...
}
\end{verbatim}
% req.xhr
\item  La siguiente vista  incluye el código JavaScript de un request Ajax:
\begin{verbatim}
$ cat views/index.ejs 
<!doctype html>
<html>
  <head>
    <title><%- title %></title>
  </head>
  <body>
    <h1><%- title  %></h1>
    <ul>
      <li><a href="http://jquery.com/" id="jq">jQuery</a>
      <li><a href="/chuchu">Visit chuchu!</a>
    </ul>
    <div class="result"></div>
    <script src="https://code.jquery.com/jquery-2.1.3.js"></script>
    <script>
      $( document ).ready(function() {
          $( "#jq" ).click(function( event ) {
              event.preventDefault();
              $.get( "/chuchu", {nombres: ["juan", "pedro"]}, function( data ) {
                $( ".result" ).html( data["answer"]);
                console.log(data);
              }, 'json');
          });
      });
    </script>
  </body>
</html>
\end{verbatim}

Supongamos que el servidor express.js responde al request con:
\begin{verbatim}
res.send('{"answer": "Server responds: hello world!"}')
\end{verbatim}
\begin{enumerate}
\item 
¿Como podemos acceder en el servidor express.js 
al objeto \verb|{nombres: ["juan", "pedro"]| enviado
desde el cliente  como segundo argumento de \verb|$.get|?
% req.query['nombres']
\item 
¿Cuando se ejecuta la callback asociada con la llamada a \verb|$.get|? 
\item 
¿Que contendrá el parámetro
\verb|data| pasado a la callback?
\item 
¿Que hace el cuarto parámetro de \verb|$.get|?
% dataType
% The type of data expected from the server. 
% Default: Intelligent Guess (xml, json, script, or html).
\end{enumerate}
\item  En el código de la práctica de Ajax CSV cuando se hacía click en uno de los botones con los nombres 
de los ficheros de ejemplo se ejecutaba en el cliente la función \verb|dump|:
\begin{verbatim}
const dump = (fileName) => {
  $.get(fileName,function (data){
    $("#original").val(data);
  });
};
\end{verbatim}
¿En que ruta/middleware del servidor express son servidos estos requests?.
Explique el funcionamiento de este código.
\end{enumerate}

\end{document}

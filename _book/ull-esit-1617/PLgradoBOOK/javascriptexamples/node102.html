
<H1><A NAME="SECTION052210000000000000000"><tex2html_anchor_invisible_mark></A>
<A NAME="section:include"><tex2html_anchor_mark></A><BR>
Manejo de directivas <TT>include</TT>
</H1>
El analisis l&#233;xico de algunos lenguajes requiere que, durante la
ejecuci&#243;n, se realice la lectura desde
diferentes ficheros de entrada. El ejemplo t&#305;pico es el manejo de las
directivas <SPAN  CLASS="textit">include file</SPAN> existentes en la mayor&#305;a de los lenguajes de
programaci&#243;n.
<BR>¿Donde est&#225; el problema? La dificultad reside en que los
analizadores generados por <SPAN  CLASS="textit">flex</SPAN>
proveen almacenamiento intermedio (<SPAN  CLASS="textit">buffers</SPAN>) para aumentar el
rendimiento. No basta con reescribir nuestro propio <SPAN  CLASS="textit">YY_INPUT</SPAN> de
manera que tenga en cuenta con que fichero se esta trabajando. 
El analizador s&#243;lo llama a <SPAN  CLASS="textit">YY_INPUT</SPAN> cuando alcanza el final de su
<SPAN  CLASS="textit">buffer</SPAN>, lo cual puede ocurrir bastante despu&#233;s de haber
encontrado la sentencia <SPAN  CLASS="textit">include</SPAN> que requiere el cambio de
fichero de entrada.
<PRE><tex2html_verbatim_mark>verbatim662#</PRE>
La funci&#243;n <tex2html_verb_mark>384<tex2html_verb_mark> crea  un <SPAN  CLASS="textit">buffer</SPAN>
lo suficientemente grande para mantener <tex2html_verb_mark>385<tex2html_verb_mark> caracteres. Devuelve un 
<tex2html_verb_mark>386<tex2html_verb_mark>, que puede ser pasado a otras rutinas. <tex2html_verb_mark>387<tex2html_verb_mark> es un puntero a
una estructura de datos opaca (<tex2html_verb_mark>388<tex2html_verb_mark>) que contiene la informaci&#243;n para la manipulaci&#243;n
del <SPAN  CLASS="textit">buffer</SPAN>. Es posible por tanto inicializar un puntero <tex2html_verb_mark>389<tex2html_verb_mark>
usando la expresión <tex2html_verb_mark>390<tex2html_verb_mark>.

<P>
La funci&#243;n <tex2html_verb_mark>391<tex2html_verb_mark> conmuta la entrada 
del analizador l&#233;xico. La funci&#243;n <tex2html_verb_mark>392<tex2html_verb_mark>
se usa para recuperar la memoria consumida por un <SPAN  CLASS="textit">buffer</SPAN>.  Tambi&#233;n se pueden limpiar 
los contenidos actuales de un buffer llamando a:
<tex2html_verb_mark>393<tex2html_verb_mark>

<P>
La regla especial <tex2html_verb_mark>394<tex2html_verb_mark> indica la acci&#243;n a ejecutar cuando 
se ha encontrado un final de fichero e <tex2html_verb_mark>395<tex2html_verb_mark> retorna un valor
distinto de cero. Cualquiera que sea la acci&#243;n asociada, esta debe terminar 
con uno de estos cuatro supuestos:

<OL>
<LI>Asignar <tex2html_verb_mark>396<tex2html_verb_mark> a un nuevo fichero de entrada.
</LI>
<LI>Ejecutar <tex2html_verb_mark>397<tex2html_verb_mark>.
</LI>
<LI>Ejecutar <tex2html_verb_mark>398<tex2html_verb_mark>.
</LI>
<LI>Cambiar a un nuevo buffer usando <tex2html_verb_mark>399<tex2html_verb_mark>.

<P>
La regla <tex2html_verb_mark>400<tex2html_verb_mark> no se puede mezclar con otros patrones.
</LI>
</OL>

<P>
Este es el resultado de una ejecuci&#243;n del programa:
<PRE><tex2html_verbatim_mark>verbatim663#</PRE>
Una alternativa a usar el patrón <tex2html_verb_mark>401<tex2html_verb_mark>
es dejar la responsabilidad de recuperar el <SPAN  CLASS="textit">buffer</SPAN> anterior
a <tex2html_verb_mark>402<tex2html_verb_mark>. En tal caso suprimiríamos esta parajea patrón-acción
y reescribiríamos <tex2html_verb_mark>403<tex2html_verb_mark>:
<PRE><tex2html_verbatim_mark>verbatim664#</PRE>

<P>

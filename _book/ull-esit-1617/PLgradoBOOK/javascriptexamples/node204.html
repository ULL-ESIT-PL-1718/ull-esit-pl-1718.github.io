
<H1><A NAME="SECTION05910000000000000000"><tex2html_anchor_invisible_mark></A>
<A NAME="section:introyacc"><tex2html_anchor_mark></A><BR>
Introducción a <TT>yacc</TT>
</H1>
Los fuentes de esta sección pueden encontrarse en
<A NAME="tex2html413"
  HREF="https://github.com/crguezl/yacc-examples">https://github.com/crguezl/yacc-examples</A>.

<P>
Veamos un ejemplo sencillo de analizador sintáctico escrito en  <#20545#><TT>yacc</TT><#20545#> .
La gramática se especifica entre las dos líneas de <tex2html_verb_mark>2862<tex2html_verb_mark>. 
Por defecto, el símbolo de arranque es el primero que aparece, en este caso
<tex2html_verb_mark>2863<tex2html_verb_mark>. En <tex2html_verb_mark>2864<tex2html_verb_mark> es posible hacer que otro variable lo sea
utilizando la declaración <tex2html_verb_mark>2866<tex2html_verb_mark>:

<P>

<H4><A NAME="SECTION05910010000000000000">
Ejemplo: La Calculadora en <TT>yacc</TT></A>
</H4>
  <TABLE CELLPADDING=3>
</TABLE>


<P>
<P><DIV><#37930#><B>Programa  <SPAN CLASS="arabic">36</SPAN>.<SPAN CLASS="arabic">1</SPAN>.<SPAN CLASS="arabic">1</SPAN></B><#37930#> &nbsp; 
<#37933#><I>Calculadora elemental. Análizador sintáctico.
<A NAME="prog:calc1"><tex2html_anchor_mark></A></I><PRE><tex2html_verbatim_mark>verbatim6322#</PRE><I></I><#37933#></DIV><P></P>

La macro  <#20551#><TT>YYSTYPE</TT><#20551#>  (línea 3) contiene el tipo del valor semántico.
Si no se declara se asume <tex2html_verb_mark>2867<tex2html_verb_mark>.

<P>
El fichero  <#20552#><TT>yyin</TT><#20552#>  (líneas 26 y 29) es definido en el 
fichero conteniendo el analizador léxico 
 <#20553#><TT>lex.yy.c</TT><#20553#> . Refiere al fichero de entrada conteniendo
el texto a analizar.

<P>
Al poner la variable  <#20554#><TT>yydebug</TT><#20554#>  a 1 activamos el modo depuración.
Para que la depuración se haga efectiva es necesario definir además
la macro  <#20555#><TT>YYDEBUG</TT><#20555#> .

<P>
El analizador sintáctico proveido por <tex2html_verb_mark>2868<tex2html_verb_mark> se llama  <#20556#><TT>yyparse</TT><#20556#>  
(línea 31). Por defecto su declaración es <tex2html_verb_mark>2869<tex2html_verb_mark>

<P>

<H4><A NAME="SECTION05910020000000000000">
El Analizador Léxico</A>
</H4>
  <TABLE CELLPADDING=3>
</TABLE>


<P>
<P><DIV><A NAME="program:hoc1l"><#37936#><B>Programa  <SPAN CLASS="arabic">36</SPAN>.<SPAN CLASS="arabic">1</SPAN>.<SPAN CLASS="arabic">2</SPAN></B><#37936#></A> &nbsp; 
<#37939#><I>Calculadora elemental.  Analizador léxico:
</I><PRE><tex2html_verbatim_mark>verbatim6323#</PRE><I></I><#37939#></DIV><P></P>


<P>

<H4><A NAME="SECTION05910030000000000000">
Compilación</A>
</H4>
  <TABLE CELLPADDING=3>
</TABLE>


<P>
Al compilar el program <tex2html_verb_mark>2870<tex2html_verb_mark> con la opción <tex2html_verb_mark>2871<tex2html_verb_mark>
se produce además del fichero  <#20565#><TT>y.tab.c</TT><#20565#>  conteniendo el
analizador sintáctico un fichero adicional de cabecera  <#20566#><TT>y.tab.h</TT><#20566#> 
conteniendo
las definiciones de los terminales:
<PRE><tex2html_verbatim_mark>verbatim6324#</PRE>
La variable  <#20567#><TT>yylval</TT><#20567#>  (líneas 3 y 7 del listado <A HREF=<tex2html_cr_mark>#program:hoc1l#20239><tex2html_cr_mark></A>) 
es declarada por el
analizador sintáctico y usada por el analizador 
léxico. El analizador léxico deja en la misma el valor semántico
asociado con el token actual.

<P>

<H4><A NAME="SECTION05910040000000000000">
Makefile</A>
</H4>
  <TABLE CELLPADDING=3>
</TABLE>


<P>
Para compilar todo el proyecto usaremos el siguiente
fichero Makefile:
<P><DIV><#37943#><B>Programa  <SPAN CLASS="arabic">36</SPAN>.<SPAN CLASS="arabic">1</SPAN>.<SPAN CLASS="arabic">3</SPAN></B><#37943#> &nbsp; 
<#37946#><I>Calculadora elemental.  Makefile:
</I><PRE><tex2html_verbatim_mark>verbatim6325#</PRE><I></I><#37946#></DIV><P></P>


<P>

<H4><A NAME="SECTION05910050000000000000">
Ejecución</A>
</H4>
  <TABLE CELLPADDING=3>
</TABLE>


<P>
<P><DIV><#37949#><B>Ejecución  <SPAN CLASS="arabic">36</SPAN>.<SPAN CLASS="arabic">1</SPAN>.<SPAN CLASS="arabic">1</SPAN></B><#37949#> &nbsp; 
<#37952#><I>Para saber que esta haciendo el analizador, insertamos una
asignación: <tex2html_verb_mark>2872<tex2html_verb_mark> justo antes de la llamada a
<tex2html_verb_mark>2873<tex2html_verb_mark> y ejecutamos el programa resultante:
</I><PRE><tex2html_verbatim_mark>verbatim6326#</PRE><I>
Introducimos la expresión <tex2html_verb_mark>2874<tex2html_verb_mark>. Antes que incluso ocurra la entrada, el algoritmo LR reduce por la regla <tex2html_verbatim_mark>#math7205#<SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline37954#</SPAN>
<tex2html_verbatim_mark>mathend000#.
</I><PRE><tex2html_verbatim_mark>verbatim6327#</PRE><I>
Observe como la declaración de la asociatividad a izquierdas <tex2html_verb_mark>2876<tex2html_verb_mark> se traduce en la reducción por la regla 5.
</I>
<P>
<I></I><PRE><tex2html_verbatim_mark>verbatim6328#</PRE><I>
La reducción por la regla <tex2html_verbatim_mark>#math7206#<SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline37956#</SPAN>
<tex2html_verbatim_mark>mathend000# produce la ejecución
del <tex2html_verb_mark>2878<tex2html_verb_mark> asociado con la regla y la salida
del valor <tex2html_verb_mark>2879<tex2html_verb_mark> que constituye el atributo de <SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline37958#</SPAN>
<tex2html_verbatim_mark>mathend000#.
</I><PRE><tex2html_verbatim_mark>verbatim6329#</PRE><I>
En Unix la combinación de teclas CTRL-D nos permite
generar el final de fichero.
</I>
<P>
<I></I><#37952#></DIV><P></P>


<P>


<H1><A NAME="SECTION058140000000000000000"><tex2html_anchor_invisible_mark></A>
<A NAME="section:mediaregla"><tex2html_anchor_mark></A><BR>
Acciones en Medio de una Regla y Atributos Heredados
</H1>
La estrategia utilizada en la sección <A HREF=<tex2html_cr_mark>#section:heredados#17827><tex2html_cr_mark></A> funciona
si podemos predecir la posición del atributo en la pila del analizador.
En el ejemplo anterior los atributos clase y tipo estaban siempre,
cualquiera que fuera la derivación a derechas, 
en las posiciones 0 y -1. Esto no siempre es asi. Consideremos
la siguiente <A NAME="18444"><tex2html_anchor_invisible_mark></A><SPAN  CLASS="textbf">definición dirigida por la sintáxis</SPAN>:

<P>
<BR>
<BR>
<DIV ALIGN="CENTER">
<TABLE CELLPADDING=3 BORDER="1">
<TR><TD ALIGN="LEFT">S <tex2html_verbatim_mark>#math7163#<SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline37470#</SPAN>
<tex2html_verbatim_mark>mathend000# a A C</TD>
<TD ALIGN="LEFT"><tex2html_verb_mark>2433<tex2html_verb_mark></TD>
</TR>
<TR><TD ALIGN="LEFT">S <tex2html_verbatim_mark>#math7164#<SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline37472#</SPAN>
<tex2html_verbatim_mark>mathend000# b A B C</TD>
<TD ALIGN="LEFT"><tex2html_verb_mark>2434<tex2html_verb_mark></TD>
</TR>
<TR><TD ALIGN="LEFT">C <tex2html_verbatim_mark>#math7165#<SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline37474#</SPAN>
<tex2html_verbatim_mark>mathend000# c</TD>
<TD ALIGN="LEFT"><tex2html_verb_mark>2435<tex2html_verb_mark></TD>
</TR>
<TR><TD ALIGN="LEFT">A <tex2html_verbatim_mark>#math7166#<SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline37476#</SPAN>
<tex2html_verbatim_mark>mathend000# a</TD>
<TD ALIGN="LEFT"><tex2html_verb_mark>2436<tex2html_verb_mark></TD>
</TR>
<TR><TD ALIGN="LEFT">B <tex2html_verbatim_mark>#math7167#<SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline37478#</SPAN>
<tex2html_verbatim_mark>mathend000# b</TD>
<TD ALIGN="LEFT"><tex2html_verb_mark>2437<tex2html_verb_mark></TD>
</TR>
</TABLE>
</DIV>
<BR>
<BR>

<P>
<P><DIV><#37490#><B>Ejercicio  <SPAN CLASS="arabic">35</SPAN>.<SPAN CLASS="arabic">14</SPAN>.<SPAN CLASS="arabic">1</SPAN></B><#37490#> &nbsp; 
<#37493#><I>Determine un orden correcto de evaluación de la anterior
definición dirigida por la sintáxis para la entrada <tex2html_verb_mark>2438<tex2html_verb_mark>.</I><#37493#></DIV><P></P>


<P>
C hereda el atributo sintetizado de A. El problema es que, en la pila
del analizador el atributo <tex2html_verb_mark>2439<tex2html_verb_mark> puede estar en la posición 0 
o -1 dependiendo de si la regla por la que se derivó fué
S <tex2html_verbatim_mark>#math7168#<SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline37495#</SPAN>
<tex2html_verbatim_mark>mathend000# a A C o bien S <tex2html_verbatim_mark>#math7169#<SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline37497#</SPAN>
<tex2html_verbatim_mark>mathend000# b A B C. La solución
a este tipo de problemas consiste en insertar acciones 
intermedias de copia del atributo de manera que se garantize que el atributo
de interés está siempre a una distancia fija. Esto es, se inserta
una variable sintáctica intermedia auxiliar M la cual deriva a vacío
y que tiene como acción asociada una regla de copia:

<P>
<BR>
<BR>
<DIV ALIGN="CENTER">
<TABLE CELLPADDING=3 BORDER="1">
<TR><TD ALIGN="LEFT">S <tex2html_verbatim_mark>#math7170#<SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline37499#</SPAN>
<tex2html_verbatim_mark>mathend000# a A C</TD>
<TD ALIGN="LEFT"><tex2html_verb_mark>2440<tex2html_verb_mark></TD>
</TR>
<TR><TD ALIGN="LEFT">S <tex2html_verbatim_mark>#math7171#<SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline37501#</SPAN>
<tex2html_verbatim_mark>mathend000# b A B M C</TD>
<TD ALIGN="LEFT"><tex2html_verb_mark>2441<tex2html_verb_mark></TD>
</TR>
<TR><TD ALIGN="LEFT">C <tex2html_verbatim_mark>#math7172#<SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline37503#</SPAN>
<tex2html_verbatim_mark>mathend000# c</TD>
<TD ALIGN="LEFT"><tex2html_verb_mark>2442<tex2html_verb_mark></TD>
</TR>
<TR><TD ALIGN="LEFT">A <tex2html_verbatim_mark>#math7173#<SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline37505#</SPAN>
<tex2html_verbatim_mark>mathend000# a</TD>
<TD ALIGN="LEFT"><tex2html_verb_mark>2443<tex2html_verb_mark></TD>
</TR>
<TR><TD ALIGN="LEFT">B <tex2html_verbatim_mark>#math7174#<SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline37507#</SPAN>
<tex2html_verbatim_mark>mathend000# b</TD>
<TD ALIGN="LEFT"><tex2html_verb_mark>2444<tex2html_verb_mark></TD>
</TR>
<TR><TD ALIGN="LEFT">M <tex2html_verbatim_mark>#math7175#<SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline37509#</SPAN>
<tex2html_verbatim_mark>mathend000#</TD>
<TD ALIGN="LEFT"><tex2html_verb_mark>2445<tex2html_verb_mark></TD>
</TR>
</TABLE>
</DIV>
<BR>
<BR>

<P>
El nuevo esquema de traducción puede ser implantado mediante
un programa <tex2html_verb_mark>2446<tex2html_verb_mark>:

<P>
<PRE><tex2html_verbatim_mark>verbatim6161#</PRE>

<P>
La ejecución muestra como se ha propagado el valor del atributo:
<PRE><tex2html_verbatim_mark>verbatim6162#</PRE>

<P>
En este momento se esta ejecutando la acción intermedia.
Lo podemos comprobar revisando el fichero <tex2html_verb_mark>2447<tex2html_verb_mark>
que fué generado usando la opción <tex2html_verb_mark>2448<tex2html_verb_mark> al llamar a <tex2html_verb_mark>2449<tex2html_verb_mark>.
La regla 2 por la que se reduce es la asociada con la acción 
intermedia:

<P>
<PRE><tex2html_verbatim_mark>verbatim6163#</PRE>

<P>
Obsérvese la notación usada por <tex2html_verb_mark>2450<tex2html_verb_mark> para la 
<A NAME="18446"><tex2html_anchor_invisible_mark></A><SPAN  CLASS="textbf">acción en medio de la regla</SPAN>: <tex2html_verb_mark>2451<tex2html_verb_mark>.
Continuamos con la antiderivación:

<P>
<PRE><tex2html_verbatim_mark>verbatim6164#</PRE>

<P>
El método puede ser generalizado a casos en los
que el atributo de interés este a diferentes distancias en
diferentes reglas sin mas que introducir las correspondientes
acciones intermedias de copia.

<P>
